# Istio åŠ¨æ€æµ‹è¯•éªŒè¯æ¨¡å— (verifier)

è¿™ä¸ªæ¨¡å—æä¾›äº†å®Œæ•´çš„ Istio é…ç½®ä¸€è‡´æ€§éªŒè¯åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ—¥å¿—è§£æã€è¡Œä¸ºå»ºæ¨¡ã€ç»“æœå¯¹æ¯”å’ŒæŠ¥å‘Šç”Ÿæˆã€‚

## ğŸ“ æ¨¡å—ç»“æ„

```
verifier/
â”œâ”€â”€ __init__.py               # æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”œâ”€â”€ log_parser.py            # Envoy è®¿é—®æ—¥å¿—è§£æå·¥å…· (392è¡Œ)
â”œâ”€â”€ behavior_model.py        # ç­–ç•¥è¡Œä¸ºæ¨¡å‹ (328è¡Œ)
â”œâ”€â”€ result_comparator.py     # ç»“æœå¯¹æ¯”å™¨ (575è¡Œ)
â”œâ”€â”€ report_generator.py      # æŠ¥å‘Šç”Ÿæˆå™¨ (723è¡Œ)
â”œâ”€â”€ main_verifier.py         # ä¸»éªŒè¯ç¨‹åº (375è¡Œ)
â”œâ”€â”€ README.md               # æœ¬æ–‡æ¡£
â”œâ”€â”€ demo_matrix.json        # æ¼”ç¤ºç”¨æµ‹è¯•çŸ©é˜µ
â”œâ”€â”€ demo_logs/              # æ¼”ç¤ºç”¨æ—¥å¿—æ•°æ®
â”œâ”€â”€ demo_results/           # æ¼”ç¤ºè¿è¡Œç»“æœ
â””â”€â”€ results/                # å®é™…éªŒè¯ç»“æœè¾“å‡º
```

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. æ—¥å¿—è§£æ (log_parser.py)

**æ ¸å¿ƒç±»**: `EnvoyLogParser`

- âœ… **å¤šæ ¼å¼æ”¯æŒ**: è§£ææ ‡å‡†å’Œç®€åŒ–çš„ Envoy access log æ ¼å¼
- âœ… **æ™ºèƒ½æå–**: è‡ªåŠ¨æå–ç‰ˆæœ¬ä¿¡æ¯ã€çŠ¶æ€ç ã€å“åº”æ—¶é—´ç­‰å…³é”®æŒ‡æ ‡
- âœ… **åˆ†å¸ƒç»Ÿè®¡**: ç»Ÿè®¡ pod è¯·æ±‚åˆ†å¸ƒå’Œç‰ˆæœ¬å‘½ä¸­ç‡
- âœ… **æƒé‡éªŒè¯**: éªŒè¯æµé‡åˆ†å¸ƒæ˜¯å¦ç¬¦åˆé¢„æœŸï¼ˆæ”¯æŒå¯è°ƒå®¹é”™ç‡ï¼‰
- âœ… **æ‰¹é‡å¤„ç†**: åŒæ—¶å¤„ç†å¤šä¸ª pod çš„æ—¥å¿—æ•°æ®

**ä¸»è¦æ–¹æ³•**:
```python
# è§£æå•æ¡æ—¥å¿—
entry = parser.parse_log_entry(log_line, pod_name)

# æ‰¹é‡è§£ææ—¥å¿—
parsed_logs = parser.parse_logs_batch(logs_dict)

# åˆ†ææµé‡åˆ†å¸ƒ
distribution = parser.analyze_distribution(parsed_logs, service_name)

# éªŒè¯æƒé‡åˆ†å¸ƒ
verification = parser.verify_weight_distribution(distribution, expected_weights, margin_of_error=0.1)
```

### 2. è¡Œä¸ºå»ºæ¨¡ (behavior_model.py)

**æ ¸å¿ƒç±»**: `BehaviorModel`, `ExpectedBehavior`

- âœ… **æ™ºèƒ½è¯†åˆ«**: ä»æµ‹è¯•ç”¨ä¾‹é…ç½®è‡ªåŠ¨ç”ŸæˆæœŸæœ›è¡Œä¸º
- âœ… **å¤šç­–ç•¥æ”¯æŒ**: è·¯ç”±ã€æµé‡åˆ†å¸ƒã€æ•…éšœæ³¨å…¥ã€ç†”æ–­ã€é‡è¯•ç­‰
- âœ… **é…ç½®éªŒè¯**: è‡ªåŠ¨æ£€æŸ¥é…ç½®å®Œæ•´æ€§å¹¶æä¾›å»ºè®®
- âœ… **çµæ´»æ‰©å±•**: æ˜“äºæ·»åŠ æ–°çš„ç­–ç•¥ç±»å‹

**æ”¯æŒçš„ç­–ç•¥ç±»å‹**:
- `ROUTING` - è·¯ç”±éªŒè¯
- `TRAFFIC_SPLIT` - æµé‡åˆ†å¸ƒéªŒè¯  
- `FAULT_INJECTION` - æ•…éšœæ³¨å…¥éªŒè¯
- `CIRCUIT_BREAKER` - ç†”æ–­å™¨éªŒè¯
- `RETRY` - é‡è¯•ç­–ç•¥éªŒè¯

### 3. ç»“æœå¯¹æ¯” (result_comparator.py)

**æ ¸å¿ƒç±»**: `ResultComparator`, `VerificationResult`, `ComprehensiveResult`

- âœ… **å¤šç»´éªŒè¯**: åŸºæœ¬æŒ‡æ ‡ã€è·¯ç”±ã€åˆ†å¸ƒã€æ•…éšœã€æ€§èƒ½ç­‰å¤šä¸ªç»´åº¦
- âœ… **æ™ºèƒ½åˆ¤æ–­**: è‡ªåŠ¨ç¡®å®šéªŒè¯çŠ¶æ€ï¼ˆé€šè¿‡/å¤±è´¥/è­¦å‘Š/è·³è¿‡ï¼‰
- âœ… **è¯¦ç»†åˆ†æ**: æä¾›åå·®åˆ†æå’Œå…·ä½“çš„å¤±è´¥åŸå› 
- âœ… **æ‰¹é‡æ”¯æŒ**: æ”¯æŒå•ä¸ªå’Œæ‰¹é‡æµ‹è¯•ç”¨ä¾‹å¯¹æ¯”

**éªŒè¯ç±»å‹**:
- åŸºæœ¬æŒ‡æ ‡éªŒè¯ï¼ˆè¯·æ±‚æ•°é‡ï¼‰
- è·¯ç”±éªŒè¯ï¼ˆç›®æ ‡ç‰ˆæœ¬å‘½ä¸­ï¼‰
- æµé‡åˆ†å¸ƒéªŒè¯ï¼ˆæƒé‡æ¯”ä¾‹ï¼‰
- æ•…éšœæ³¨å…¥éªŒè¯ï¼ˆé”™è¯¯ç‡å’ŒçŠ¶æ€ç ï¼‰
- æ€§èƒ½æŒ‡æ ‡éªŒè¯ï¼ˆæˆåŠŸç‡å’Œå“åº”æ—¶é—´ï¼‰
- ç†”æ–­å™¨éªŒè¯ï¼ˆç†”æ–­è¡Œä¸ºç‰¹å¾ï¼‰

### 4. æŠ¥å‘Šç”Ÿæˆ (report_generator.py)

**æ ¸å¿ƒç±»**: `ReportGenerator`

- âœ… **å¤šæ ¼å¼è¾“å‡º**: HTML å¯è§†åŒ–ã€JSON æ•°æ®ã€æ–‡æœ¬æ‘˜è¦
- âœ… **ç¾è§‚ç•Œé¢**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯æŸ¥çœ‹
- âœ… **è¯¦ç»†å›¾è¡¨**: åŒ…å«åˆ†å¸ƒå›¾ã€ç»Ÿè®¡å›¾ç­‰å¯è§†åŒ–å…ƒç´ 
- âœ… **äº¤äº’åŠŸèƒ½**: æ”¯æŒå±•å¼€/æŠ˜å è¯¦æƒ…

**è¾“å‡ºæ ¼å¼**:
- **HTML æŠ¥å‘Š** - ç²¾ç¾çš„å¯è§†åŒ–æŠ¥å‘Šï¼ŒåŒ…å«å›¾è¡¨å’Œäº¤äº’åŠŸèƒ½
- **JSON æŠ¥å‘Š** - å®Œæ•´çš„æœºå™¨å¯è¯»æ•°æ®ï¼Œä¾¿äºè¿›ä¸€æ­¥åˆ†æ
- **æ–‡æœ¬æ‘˜è¦** - ç®€æ´çš„ç»“æœæ€»ç»“ï¼Œä¾¿äºå¿«é€ŸæŸ¥çœ‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install paramiko pyyaml
```

### æ¼”ç¤ºæ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
cd verifier
python main_verifier.py --demo
```

æ¼”ç¤ºæ¨¡å¼ä¼šï¼š
1. åˆ›å»ºç¤ºä¾‹æµ‹è¯•çŸ©é˜µå’Œæ—¥å¿—æ•°æ®
2. è¿è¡Œå®Œæ•´çš„éªŒè¯æµç¨‹
3. ç”Ÿæˆæ‰€æœ‰æ ¼å¼çš„æŠ¥å‘Š
4. æ˜¾ç¤ºéªŒè¯ç»“æœæ‘˜è¦

### ä½¿ç”¨ç°æœ‰æ•°æ®

```bash
# éªŒè¯æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
python main_verifier.py --matrix ../output_matrix.json --logs ../results/envoy_logs

# åˆ†æå•ä¸ªæµ‹è¯•ç”¨ä¾‹
python main_verifier.py --case case_001 --matrix ../output_matrix.json --logs ../results/envoy_logs

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•
python main_verifier.py --matrix test.json --logs logs/ --output reports/
```

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--matrix` | `-m` | `output_matrix.json` | æµ‹è¯•çŸ©é˜µæ–‡ä»¶è·¯å¾„ |
| `--logs` | `-l` | `results/envoy_logs` | æ—¥å¿—ç›®å½•è·¯å¾„ |
| `--output` | `-o` | `results/verification` | æŠ¥å‘Šè¾“å‡ºç›®å½• |
| `--case` | `-c` | - | åˆ†æå•ä¸ªç”¨ä¾‹ï¼ˆç”¨ä¾‹IDï¼‰ |
| `--demo` | - | - | è¿è¡Œæ¼”ç¤ºæ¨¡å¼ |

## ğŸ“‹ è¾“å…¥æ•°æ®æ ¼å¼

### æµ‹è¯•çŸ©é˜µæ–‡ä»¶æ ¼å¼

```json
{
  "global_settings": {
    "ingress_url": "http://192.168.92.131:30476/productpage"
  },
  "test_cases": [
    {
      "case_id": "case_001",
      "description": "è·¯ç”±æµ‹è¯• - è¯·æ±‚è·¯ç”±åˆ° reviews-v2",
      "type": "single_request",
      "request_params": {
        "host": "reviews",
        "headers": {"user-agent": "jason"}
      },
      "expected_outcome": {
        "destination": "v2"
      }
    },
    {
      "case_id": "case_002",
      "description": "æµé‡åˆ†å¸ƒæµ‹è¯• - 80% v1, 20% v3",
      "type": "load_test",
      "request_params": {
        "host": "reviews"
      },
      "load_params": {
        "num_requests": 50,
        "concurrency": 1
      },
      "expected_outcome": {
        "distribution": {
          "v1": "0.80",
          "v3": "0.20"
        },
        "margin_of_error": "0.05"
      }
    }
  ]
}
```

### æ—¥å¿—æ–‡ä»¶å‘½åè§„åˆ™

æ—¥å¿—æ–‡ä»¶éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ ¼å¼å‘½åï¼š
```
logs/
â”œâ”€â”€ case_001_reviews-v2-abc123.log
â”œâ”€â”€ case_002_reviews-v1-def456.log  
â”œâ”€â”€ case_002_reviews-v3-ghi789.log
â””â”€â”€ ...
```

**å‘½åæ ¼å¼**: `{case_id}_{service}-{version}-{pod_hash}.log`

### Envoy è®¿é—®æ—¥å¿—æ ¼å¼

æ”¯æŒæ ‡å‡†çš„ Envoy access log æ ¼å¼ï¼š
```
[2024-01-15T10:30:15.123Z] "GET /reviews/2 HTTP/1.1" 200 - 0 157 45 12 "192.168.1.100" "jason" "abc123" "reviews" "10.244.1.15:9080"
```

## ğŸ“Š éªŒè¯ç±»å‹è¯¦è§£

### 1. è·¯ç”±éªŒè¯

éªŒè¯è¯·æ±‚æ˜¯å¦æ­£ç¡®è·¯ç”±åˆ°æœŸæœ›çš„ç‰ˆæœ¬ï¼š

```json
{
  "type": "single_request",
  "expected_outcome": {
    "destination": "v2"
  }
}
```

**éªŒè¯é€»è¾‘**:
- æ£€æŸ¥æ˜¯å¦æœ‰è¯·æ±‚å‘½ä¸­æœŸæœ›ç‰ˆæœ¬çš„ pod
- è®¡ç®—è·¯ç”±æˆåŠŸç‡
- è¯†åˆ«å¯ç”¨çš„ pod åˆ—è¡¨

### 2. æµé‡åˆ†å¸ƒéªŒè¯

éªŒè¯æµé‡æƒé‡åˆ†å¸ƒæ˜¯å¦ç¬¦åˆé¢„æœŸï¼š

```json
{
  "type": "load_test",
  "expected_outcome": {
    "distribution": {
      "v1": "0.80",
      "v3": "0.20"
    },
    "margin_of_error": "0.05"
  }
}
```

**éªŒè¯é€»è¾‘**:
- ç»Ÿè®¡å„ç‰ˆæœ¬çš„å®é™…è¯·æ±‚æ•°é‡
- è®¡ç®—å®é™…æµé‡ç™¾åˆ†æ¯”
- ä¸æœŸæœ›æƒé‡å¯¹æ¯”ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨å®¹é”™èŒƒå›´å†…
- **å¢å¼ºæ˜¾ç¤º**: æ˜¾ç¤ºæ¯ä¸ªç‰ˆæœ¬çš„å…·ä½“è¯·æ±‚æ•°é‡å’Œåå·®

**è¾“å‡ºç¤ºä¾‹**:
```
âœ… æƒé‡åˆ†å¸ƒéªŒè¯é€šè¿‡ - âœ… v1: 40ä¸ªè¯·æ±‚ (80.0%, æœŸæœ›80.0%) | âœ… v3: 10ä¸ªè¯·æ±‚ (20.0%, æœŸæœ›20.0%)
```

### 3. æ•…éšœæ³¨å…¥éªŒè¯

éªŒè¯æ•…éšœæ³¨å…¥æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼š

```json
{
  "request_params": {
    "trigger_condition": "simulate_503_error",
    "inject_fault_to": "details"
  }
}
```

**éªŒè¯é€»è¾‘**:
- ç»Ÿè®¡æŒ‡å®šçŠ¶æ€ç çš„å‡ºç°æ¬¡æ•°
- è®¡ç®—æ•…éšœç‡
- éªŒè¯æ˜¯å¦è¾¾åˆ°é¢„æœŸçš„æ•…éšœè¡Œä¸º

### 4. æ€§èƒ½æŒ‡æ ‡éªŒè¯

éªŒè¯ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ï¼š

**éªŒè¯æŒ‡æ ‡**:
- æˆåŠŸç‡ï¼ˆ200-399 çŠ¶æ€ç ï¼‰
- å¹³å‡å“åº”æ—¶é—´
- P95/P99 å“åº”æ—¶é—´
- é”™è¯¯ç‡åˆ†å¸ƒ

## ğŸ“ˆ è¾“å‡ºæŠ¥å‘Šè¯¦è§£

### HTML æŠ¥å‘Š

- **æ¦‚è§ˆä»ªè¡¨æ¿**: æ˜¾ç¤ºæ•´ä½“ç»Ÿè®¡å’ŒæˆåŠŸç‡
- **è¯¦ç»†ç»“æœ**: æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å®Œæ•´éªŒè¯ä¿¡æ¯
- **å¯è§†åŒ–å›¾è¡¨**: åˆ†å¸ƒå›¾ã€æˆåŠŸç‡å›¾ç­‰
- **äº¤äº’åŠŸèƒ½**: ç‚¹å‡»å±•å¼€/æŠ˜å è¯¦æƒ…

### JSON æŠ¥å‘Š

```json
{
  "metadata": {
    "generated_at": "2025-07-02T16:44:09",
    "total_test_cases": 2,
    "tool_version": "1.0.0"
  },
  "overall_statistics": {
    "total_cases": 2,
    "passed_cases": 2,
    "success_rate": 1.0
  },
  "test_results": [
    {
      "case_id": "case_001",
      "overall_status": "passed",
      "individual_verifications": [...]
    }
  ]
}
```

### æ–‡æœ¬æ‘˜è¦

```
============================================================
Istio åŠ¨æ€æµ‹è¯•éªŒè¯æŠ¥å‘Šæ‘˜è¦
============================================================
ğŸ“Š æ•´ä½“ç»Ÿè®¡:
  æ€»ç”¨ä¾‹æ•°: 2
  é€šè¿‡ç”¨ä¾‹: 2
  æˆåŠŸç‡: 100.0%

ğŸ“‹ ç”¨ä¾‹è¯¦æƒ…:
  âœ… case_001: è·¯ç”±æµ‹è¯•
  âœ… case_002: æµé‡åˆ†å¸ƒæµ‹è¯•
```

## ğŸ”§ API ä½¿ç”¨æŒ‡å—

### å•ç‹¬ä½¿ç”¨æ—¥å¿—è§£æå™¨

```python
from verifier import EnvoyLogParser

# åˆ›å»ºè§£æå™¨
parser = EnvoyLogParser()

# è§£ææ—¥å¿—
logs_dict = {"pod1": "log content...", "pod2": "log content..."}
parsed_logs = parser.parse_logs_batch(logs_dict)

# åˆ†æåˆ†å¸ƒ
distribution = parser.analyze_distribution(parsed_logs, "reviews")

# éªŒè¯æƒé‡
expected_weights = {"v1": 0.8, "v3": 0.2}
verification = parser.verify_weight_distribution(
    distribution, expected_weights, margin_of_error=0.1
)
```

### å•ç‹¬ä½¿ç”¨è¡Œä¸ºå»ºæ¨¡

```python
from verifier import BehaviorModel

model = BehaviorModel()
test_case = {...}  # æµ‹è¯•ç”¨ä¾‹é…ç½®
expected_behavior = model.parse_test_case(test_case)

# ç”Ÿæˆè¡Œä¸ºæ‘˜è¦
summary = model.generate_behavior_summary(expected_behavior)

# éªŒè¯é…ç½®
warnings = model.validate_behavior_config(expected_behavior)
```

### å•ç‹¬ä½¿ç”¨ç»“æœå¯¹æ¯”

```python
from verifier import ResultComparator

comparator = ResultComparator()
result = comparator.compare_single_result(
    case_id, expected_behavior, parsed_logs
)

# æŸ¥çœ‹éªŒè¯ç»“æœ
print(f"çŠ¶æ€: {result.overall_status}")
print(f"æ‘˜è¦: {result.summary}")
for verification in result.individual_results:
    print(f"- {verification.test_name}: {verification.message}")
```

### å•ç‹¬ä½¿ç”¨æŠ¥å‘Šç”Ÿæˆ

```python
from verifier import ReportGenerator

generator = ReportGenerator("output_dir")
report_files = generator.generate_comprehensive_report(
    verification_results, test_config, "my_report"
)

print(f"HTML æŠ¥å‘Š: {report_files['html']}")
print(f"JSON æŠ¥å‘Š: {report_files['json']}")
```

## âš™ï¸ é…ç½®é€‰é¡¹

### æ—¥å¿—è§£æé…ç½®

```python
# è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼
custom_pattern = r'...'
parser = EnvoyLogParser(custom_pattern)

# è°ƒæ•´å®¹é”™ç‡
verification = parser.verify_weight_distribution(
    distribution, expected_weights, margin_of_error=0.15  # 15% å®¹é”™
)
```

### éªŒè¯é…ç½®

```python
# åœ¨ expected_behavior ä¸­è°ƒæ•´æœŸæœ›å€¼
expected_behavior.expected_success_rate = 0.90  # 90% æˆåŠŸç‡
expected_behavior.expected_response_time_p95 = 1.0  # 1ç§’ P95
expected_behavior.margin_of_error = 0.10  # 10% å®¹é”™
```

### æŠ¥å‘Šé…ç½®

```python
# è‡ªå®šä¹‰è¾“å‡ºç›®å½•å’Œæ–‡ä»¶å
generator = ReportGenerator("custom_output_dir")
report_files = generator.generate_comprehensive_report(
    results, config, "custom_prefix"
)
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ—¥å¿—æ”¶é›†

- âœ… ç¡®ä¿ Envoy access log é…ç½®æ­£ç¡®
- âœ… ä½¿ç”¨ç»Ÿä¸€çš„æ—¶é—´æˆ³æ ¼å¼
- âœ… åŠæ—¶æ¸…ç†å†å²æ—¥å¿—
- âœ… ä¿è¯æ—¥å¿—æ–‡ä»¶å‘½åè§„èŒƒ

### 2. æµ‹è¯•è®¾è®¡

- âœ… è®¾ç½®åˆç†çš„è¯·æ±‚æ•°é‡ï¼ˆå»ºè®® â‰¥ 50ï¼‰
- âœ… é…ç½®é€‚å½“çš„å®¹é”™ç‡ï¼ˆé€šå¸¸ 5-10%ï¼‰
- âœ… æ˜ç¡®å®šä¹‰æœŸæœ›è¡Œä¸º
- âœ… è€ƒè™‘ç½‘ç»œå»¶è¿Ÿå’Œç³»ç»Ÿè´Ÿè½½

### 3. ç»“æœåˆ†æ

- âœ… ä¼˜å…ˆæŸ¥çœ‹ HTML æŠ¥å‘Šçš„æ•´ä½“æ¦‚è§ˆ
- âœ… å…³æ³¨å¤±è´¥ç”¨ä¾‹çš„è¯¦ç»†ä¿¡æ¯
- âœ… ç»“åˆç³»ç»Ÿæ—¥å¿—åˆ†æé—®é¢˜æ ¹å› 
- âœ… å®šæœŸæ£€æŸ¥éªŒè¯è§„åˆ™çš„åˆç†æ€§

### 4. æ€§èƒ½ä¼˜åŒ–

- âœ… æ‰¹é‡å¤„ç†æ—¥å¿—æ–‡ä»¶
- âœ… åˆç†æ§åˆ¶æŠ¥å‘Šå¤§å°
- âœ… å®šæœŸæ¸…ç†å†å²æŠ¥å‘Š
- âœ… ä½¿ç”¨å¢é‡éªŒè¯æ¨¡å¼

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. æ—¥å¿—è§£æå¤±è´¥**
```
âŒ è§£ææ—¥å¿—å¤±è´¥: invalid format
```
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ—¥å¿—æ ¼å¼æ˜¯å¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼
- éªŒè¯æ–‡ä»¶ç¼–ç ï¼ˆå»ºè®® UTF-8ï¼‰
- ç¡®è®¤æ–‡ä»¶å‘½åè§„åˆ™æ­£ç¡®

**2. æƒé‡åˆ†å¸ƒéªŒè¯ä¸é€šè¿‡**
```
âŒ æƒé‡åˆ†å¸ƒéªŒè¯å¤±è´¥ - âŒ v1: 30ä¸ªè¯·æ±‚ (60.0%, æœŸæœ›80.0%)
```
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥è¯·æ±‚æ•°é‡æ˜¯å¦è¶³å¤Ÿï¼ˆå»ºè®® â‰¥ 50ï¼‰
- è°ƒæ•´å®¹é”™ç‡å‚æ•° (`margin_of_error`)
- ç¡®è®¤ç‰ˆæœ¬æ ‡è¯†æå–æ­£ç¡®
- éªŒè¯ Istio é…ç½®æ˜¯å¦ç”Ÿæ•ˆ

**3. æŠ¥å‘Šç”Ÿæˆå¤±è´¥**
```
âŒ æ— æ³•ç”ŸæˆæŠ¥å‘Š: Permission denied
```
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥è¾“å‡ºç›®å½•æƒé™
- ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³
- éªŒè¯è¾“å…¥æ•°æ®æ ¼å¼æ­£ç¡®

### è°ƒè¯•æŠ€å·§

1. **ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼**: `python main_verifier.py --demo`
2. **åˆ†æå•ä¸ªç”¨ä¾‹**: `python main_verifier.py --case case_001`
3. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**: æ£€æŸ¥ JSON æŠ¥å‘Šä¸­çš„ `details` å­—æ®µ
4. **éªŒè¯æ•°æ®æ ¼å¼**: ç¡®ä¿æ—¥å¿—æ–‡ä»¶å’Œæµ‹è¯•çŸ©é˜µæ ¼å¼æ­£ç¡®

## ğŸš€ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„éªŒè¯ç±»å‹

1. åœ¨ `behavior_model.py` ä¸­æ·»åŠ æ–°çš„ `PolicyType`
2. åœ¨ `BehaviorModel` ä¸­æ·»åŠ è§£æé€»è¾‘
3. åœ¨ `ResultComparator` ä¸­æ·»åŠ éªŒè¯é€»è¾‘
4. æ›´æ–°æ–‡æ¡£å’Œæµ‹è¯•ç”¨ä¾‹

### è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼

1. åˆ›å»ºè‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼
2. ç»§æ‰¿ `EnvoyLogParser` ç±»
3. é‡å†™ `parse_log_entry` æ–¹æ³•
4. æµ‹è¯•è§£ææ•ˆæœ

### è‡ªå®šä¹‰æŠ¥å‘Šæ ¼å¼

1. ç»§æ‰¿ `ReportGenerator` ç±»
2. é‡å†™ç›¸åº”çš„ç”Ÿæˆæ–¹æ³•
3. æ·»åŠ æ–°çš„æ¨¡æ¿å’Œæ ·å¼
4. é›†æˆåˆ°ä¸»æµç¨‹ä¸­

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æœ¬ README çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. è¿è¡Œæ¼”ç¤ºæ¨¡å¼éªŒè¯åŸºæœ¬åŠŸèƒ½
3. æ£€æŸ¥è¾“å…¥æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
4. æŸ¥çœ‹ç”Ÿæˆçš„ JSON æŠ¥å‘Šè·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ“„ è®¸å¯è¯

æœ¬æ¨¡å—éµå¾ªä¸ä¸»é¡¹ç›®ç›¸åŒçš„è®¸å¯è¯ã€‚

---

**ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025-07-02  
**ç»´æŠ¤è€…**: Istio åŠ¨æ€æµ‹è¯•æ¡†æ¶å›¢é˜Ÿ 